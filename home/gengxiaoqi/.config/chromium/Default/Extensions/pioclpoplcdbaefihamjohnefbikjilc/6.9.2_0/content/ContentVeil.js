/*! Copyright 2009-2016 Evernote Corporation. All rights reserved. */
function ContentVeil(){"use strict";function a(a){clearTimeout(r),r=setTimeout(function(){a.srcElement.className+=" tooltipon"},250)}function b(){clearTimeout(r),this.className=this.className.replace(/\s*tooltipon/g,"")}function c(a){s.classList.toggle("fixed",a)}function d(a){C=null,D=null,E=0,F=0,H=!1,t.className=t.className.replace(/\s*evernoteShadowBox/g,""),s.className=t.className.replace(/\s*evernoteShadowBox/g,""),a||q(),v.className=v.className.replace(/\s*evernoteUsingExpandContract/g,""),w.className=w.className.replace(/s*evernoteUsingExpandContract/g,""),o("embed"),e()}function e(){s.style.height=document.body.scrollHeight+"px",s.style.width=document.body.scrollWidth+"px",s.style.borderWidth="0"}function f(a){g(),t.style.display="none",a?s.style.backgroundColor=a:s.style.backgroundColor="rgba(255, 255, 255, 0.75)"}function g(){if(t.style.display="",s.style.backgroundColor="",!s.parentNode){for(var a=0;a<2;a++)x[a].setAttribute("tooltip",Browser.i18n.getMessage("expandArticleTooltip")),y[a].setAttribute("tooltip",Browser.i18n.getMessage("contractArticleTooltip"));document.documentElement.appendChild(s)}}function h(){s.parentNode&&s.parentNode.removeChild(s)}function i(){return!s.parentNode}function j(a,b){return{top:a.top-b,left:a.left-b,bottom:a.bottom+b,right:a.right+b,width:a.width+2*b,height:a.height+2*b}}function k(a,b,c,d){C=a,D=b,E=document.body.scrollTop,F=document.body.scrollLeft,G=c,H=d,a=j(a,8);var e=a.left,f=a.top,g=a.width,h=a.height,i=s.style.width.replace("px",""),k=s.style.height.replace("px","");t.className=t.className.replace(/\s*evernoteShadowBox/g,""),s.className=t.className.replace(/\s*evernoteShadowBox/g,""),d&&(t.className+=" evernoteShadowBox",s.className+=" evernoteShadowBox"),t.style.display="block",s.style.borderLeftWidth=Math.max(e,0)+"px",s.style.borderTopWidth=Math.max(f,0)+"px",s.style.borderRightWidth=Math.max(i-e-g,0)+"px",s.style.borderBottomWidth=Math.max(k-f-h,0)+"px"}function l(a,b,c){k(a,b,!0,c)}function m(a,b,c,e){var f=contentPreview.computeDescendantBoundingBox(a);f?(d(e),k(f,a,!0,c),b&&a.scrollIntoView(!0),n("embed",a),v.className+=" evernoteUsingExpandContract",f.height>window.innerHeight?w.className+=" evernoteUsingExpandContract":w.className=w.className.replace(/\s*evernoteUsingExpandContract/g,""),g()):log.warn("Couldn't create rectangle from element: "+a.cloneNode(!1).outerHTML)}function n(a,b){for(var c=document.getElementsByTagName(a),d=0;d<c.length;d++)c[d].enSavedVisibility=c[d].style.visibility,c[d].style.visibility="hidden";o(a,b)}function o(a,b){b||(b=document);for(var c=b.getElementsByTagName(a),d=0;d<c.length;d++)"undefined"!=typeof c[d].enSavedVisibility&&(c[d].style.visibility=c[d].enSavedVisibility,delete c[d].enSavedVisibility)}function p(){return s}function q(a){a?1==a?u.innerText=Browser.i18n.getMessage("oneMorePageFound"):u.innerText=Browser.i18n.getMessage("morePagesFound",[a.toString()]):u.innerText="",u.scrollIntoView(!0)}var r,s=document.createElement("div");s.id="evernoteContentVeil";var t=document.createElement("div");t.id="evernoteInnerBox";var u=document.createElement("div");u.id="evernotePageCounter",s.appendChild(u),s.appendChild(t);for(var v,w,x={},y={},z=0;z<2;z++){var A=document.createElement("div"),B=document.createElement("div");A.className="evernoteArticleExpand",B.className="evernoteArticleContract",x[z]=A,y[z]=B,A.addEventListener("click",function(){contentPreview.expandPreview()}),B.addEventListener("click",function(){contentPreview.contractPreview()}),A.addEventListener("mousemove",a),A.addEventListener("mouseout",b),B.addEventListener("mousemove",a),B.addEventListener("mouseout",b),0==z?(v=document.createElement("div"),v.className="evernoteExpandContract evernoteUsingExpandContract",v.appendChild(A),v.appendChild(B),s.appendChild(v)):(w=document.createElement("div"),w.id="bottomExpandContract",w.className="evernoteExpandContract",w.appendChild(A),w.appendChild(B),s.appendChild(w))}var C=null,D=null,E=0,F=0,G=!1,H=!1;window.addEventListener("scroll",function(a){if(C&&!G){var b={top:C.top,bottom:C.bottom,left:C.left,right:C.right,width:C.width,height:C.height},c=document.body.scrollTop-E,d=document.body.scrollLeft-F;if(!c&&!d)return;b.top-=c,b.bottom-=c,b.left-=d,b.right-=d,e(),k(b,D)}}),window.addEventListener("resize",function(a){if(D){var b=contentPreview.computeDescendantBoundingBox(D);b&&(e(),H?k(b,D,!0,!0):k(b,D,!0,!1))}}),window.addEventListener("DOMSubtreeModified",function(a){if(D&&D.contains(a.srcElement)){var b=contentPreview.computeDescendantBoundingBox(D);b&&(e(),H?k(b,D,!0,!0):k(b,D,!0,!1))}}),this.reset=d,this.fixPosition=c,this.show=g,this.gray=f,this.getElement=p,this.hide=h,this.isHidden=i,this.revealRect=k,this.revealStaticRect=l,this.outlineElement=m,this.expandRect=j,this.setPageCount=q,Object.preventExtensions(this)}
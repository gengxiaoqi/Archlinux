var g=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};var q=function(){this.D=/&lt;(\/?(b|i|em|br))&gt;/gi;this.C=/&amp;([a-z0-9]+|#[0-9]+);/gi;this.q=document.createElement("div")},r=function(a,b){a.q.textContent=b;b=a.q.innerHTML;return b.replace(a.D,function(a,b){return"<"+b+">"}).replace(a.C,function(a,b){return"&"+b+";"})};var u=/[?&]oi=([^&]+)/,v=function(a,b){var c=document.createElement(a);c.className=b;return c},w=function(a,b){var c=document.createElement(a);c.id=b;return c},z=function(a,b,c){var d=document.createElement("a");d.setAttribute("href",a);d.innerHTML=b;c&&(d.className=c);return d},A=function(a,b){for(var c=b.length,d=0;d<c;d++)a.appendChild(b[d])},B=function(a,b,c){var d=new XMLHttpRequest;d.open(b?"POST":"GET","https://scholar.google.com/"+a,!0);d.onreadystatechange=function(){4==d.readyState&&c(d.status,
d.responseText)};d.timeout=3E4;b&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");b?d.send(b):d.send()},C=function(a,b){var c=null;if(200==a){try{c=JSON.parse(b)}catch(d){}if("object"!=typeof c||c instanceof Array)c=null}return c};var H=function(a,b,c){this.a=a;this.K=b;this.A=c;this.M=new q;this.w=w("div","help");this.j=w("a","full-screen");this.o=w("a","settings");this.B=w("div","spinner");this.n=w("form","search-form");this.e=w("input","search-box");this.d=w("div","main");this.k=w("div","message");this.p=this.b="";a=document.body;a.setAttribute("dir",this.a.getMessage("@@bidi_dir"));a.innerHTML="";b=w("button","search-button");b.type="submit";A(this.n,[this.e,b]);c=w("div","middle");A(c,[this.d,this.B,this.k]);var d=w("div",
"bottom");D(this,"","");this.o.setAttribute("href","/scholar_settings?oi=gsb&hl="+F(this.a));A(d,[this.j,this.o,this.w]);A(a,[this.n,c,d]);document.title=this.a.getMessage("853");c=this.a.getMessage("920");b.setAttribute("aria-label",c);b=this.a.getMessage("625");this.B.setAttribute("aria-label",b);this.j.title=this.a.getMessage("922");this.o.title=this.a.getMessage("628");this.n.addEventListener("submit",this.J.bind(this));a.addEventListener("click",this.G.bind(this));a.addEventListener("focus",
this.H.bind(this),!0);G(this,!0)},G=function(a,b){document.body.classList.toggle("busy",b);I(a,"")},I=function(a,b){a.k.innerHTML=b},J=function(a){I(a,a.a.getMessage("921")+" ");a.k.appendChild(z(a.j.getAttribute("href"),a.a.getMessage("922")))},M=function(a,b){var c=K,d=(a.match(/^.*[?&](q|title)=([^&]+).*$/)||["","",""])[2],d=decodeURIComponent(d.replace(/[+]/g,"%20"));c.b="gsb20"<(a.match(u)||["",""])[1]?"":d;c.p=c.b&&a;c.e.value=c.b?"":d;c.e.focus();var m=!!d&&!c.b;c.w.innerHTML=c.a.getMessage(b?
m?"861":"862":m?"859":"860");D(c,c.b?"?oi=gsb00":a,d);d?L(c,a):(c.d.innerHTML="",G(c,!1))},L=function(a,b){G(a,!0);var c=b+(0<=b.indexOf("?")?"&":"?")+"output=gsb&hl="+F(a.a);a.A(c,"",a.I.bind(a))};
H.prototype.I=function(a,b){function c(a,b){a&&(b.firstChild&&b.appendChild(document.createTextNode(" ")),b.appendChild(a))}this.d.innerHTML="";G(this,!1);var d=C(a,b)||{},m=d.r;if(m instanceof Array&&!d.L){var n=Math.min(m.length,3);if(this.b){if(0>=n||!d.h)return;this.e.value||(this.e.value=this.b,this.e.focus(),D(this,this.p,this.b))}for(d=0;d<n;d++){var e=m[d];if(g(e)){var k=N(this,e.t),f=(e.u||"")+"",x=N(this,e.x),p=N(this,e.m),h=N(this,e.s),l=e.l||{};if(k&&g(l)){var e={},E;for(E in l){var t=
l[E];g(t)&&(e[E]=z((t.u||"")+"",N(this,t.l),E))}l=v("div","result");c(e.f,l);var t=v("h3","result-title"),y="";x&&(y=v("span","result-marker"),y.innerHTML="["+x+"]",y=y.outerHTML+" ");k=y+k;f?(f=z(f,k),t.appendChild(f)):t.innerHTML=k;l.appendChild(t);p&&(f=v("div","result-metadata"),f.innerHTML=p,l.appendChild(f));h&&1==n&&(p=v("div","result-snippet"),p.innerHTML=h,l.appendChild(p));h=v("div","result-links");c(e.c,h);c(e.r,h);c(e.v,h);h.firstChild&&l.appendChild(h);h=v("div","result-access");c(e.g,
h);c(e.l,h);h.firstChild&&l.appendChild(h);this.d.appendChild(l)}}}this.d.firstChild||I(this,this.a.getMessage("923"))}else J(this)};
H.prototype.F=function(a,b){this.d.innerHTML="";G(this,!1);var c=C(a,b)||{},d=c.l,m=c.i||[];if(d instanceof Array&&m instanceof Array&&!c.L){for(var n=Math.min(d.length,5),c=w("table","cite"),e=0;e<n;e++){var k=d[e];if(g(k)){var f=N(this,k.l),k=N(this,k.h);if(f&&k){var x=c.insertRow(),p=document.createElement("th");p.scope="row";p.innerHTML=f;x.appendChild(p);f=x.insertCell();f.tabIndex=0;f.innerHTML=k}}}d=Math.min(m.length,5);n=w("div","import");for(e=0;e<d;e++)f=m[e],g(f)&&(n.firstChild&&n.appendChild(document.createTextNode(" ")),
n.appendChild(z((f.u||"")+"",N(this,f.l))));c.firstChild?(this.d.appendChild(c),this.d.appendChild(n)):I(this,this.a.getMessage("923"))}else J(this)};var D=function(a,b,c){a.j.setAttribute("href","/"+(b+(0<=b.indexOf("?")?"&":"?"))+((b.match(u)||["",""])[1]?"":"oi=gsb&")+(c?"lookup=0&":"")+"hl="+F(a.a))};H.prototype.J=function(a){var b=this.e.value,c="scholar?oi=gsb95&q="+encodeURIComponent(b);this.b=this.p="";D(this,c,b);L(this,c);a.preventDefault()};
H.prototype.G=function(a){for(var b=a.target,c=document.body;b!=c;){var d=1==b.nodeType&&b.getAttribute("href")||"";if("#f"==d.substr(0,2)){a.preventDefault();a=d.substr(2);G(this,!0);a="scholar?q=info:"+encodeURIComponent(a)+":scholar.google.com/&output=gsb-cite&hl="+F(this.a);this.A(a,"",this.F.bind(this));break}else if(d){a.preventDefault();"/"==d[0]&&(d="https://scholar.google.com"+d);this.K(d);break}else if("TR"==b.nodeName){a.preventDefault();(a=b.getElementsByTagName("td")[0])&&0<=a.tabIndex&&
a.focus();break}b=b.parentElement}};H.prototype.H=function(a){var b=a.target;"TD"==b.nodeName&&setTimeout(function(){window.getSelection().selectAllChildren(b)},0)};var N=function(a,b){return r(a.M,(b||"")+"")};var O=function(){},P={en_GB:"en",en_US:"en",es_419:"es",fil:"tl",he:"iw",pt_BR:"pt-BR",pt_PT:"pt-PT",zh_CN:"zh-CN",zh_TW:"zh-TW"};O.prototype.getMessage=function(a,b){return chrome.i18n.getMessage(a,b)};var F=function(a){a=a.getMessage("@@ui_locale");return P[a]||a};document.body.style.width="400px";var K=new H(new O,function(a){chrome.tabs.create({url:a})},function(a,b,c){B(a,b,c)});chrome.runtime.onMessage.addListener(function(a){a=(a||"")+"";M(a,/^.*[?&]ct=emb(&.*)?$/.test(a))});chrome.tabs.executeScript({file:"contentscript-compiled.js"},function(){chrome.runtime.lastError&&M("",!0)});

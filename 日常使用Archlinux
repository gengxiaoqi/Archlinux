网络：NetWorkManager
# 检查服务：systemctl status NetworkManager
# 启动服务：systemctl enable --now NetworkManager
# nmcli device wifi connect **** -a
# 连接 Wi-Fi（如果还没连）：执行 nmtui 开启可视化连接界面。

配置用户权限(sudo)
# 添加用户：useradd -m -G wheel -s /bin/zsh bulibuli
# 设置密码：passwd bulibuli
# 赋予sudo权限：执行visudo，找到下面这一行并删掉前面的 # 注释： %wheel ALL=(ALL:ALL) ALL

安装yay
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si

安装显卡驱动
# 3D 图形支持 (OpenGL/Vulkan)
sudo pacman -S mesa vulkan-intel
# 视频硬件加速 (非常重要，否则 Wayland 下浏览器看视频 CPU 占用极高)
sudo pacman -S intel-media-driver libva-utils
# Intel: sudo pacman -S mesa lib32-mesa
# AMD: sudo pacman -S mesa lib32-mesa xf86-video-amdgpu
# NVIDIA: sudo pacman -S nvidia nvidia-utils

开启“早期微内核加载”(Early KMS) —— 关键步骤
# 在 Wayland 环境下，为了让系统从启动的第一秒就获得正确的屏幕分辨率，并避免进入桌面时闪黑屏，建议开启 Early KMS：
# 编辑配置文件：sudo nano /etc/mkinitcpio.conf
# 找到 MODULES=(...) 这一行，添加 i915：
# MODULES=(i915)
# 重新生成镜像：sudo mkinitcpio -P

屏幕缩放 (HiDPI)
# 如果你使用的是高分屏（如 2K/4K 笔记本），Wayland 处理缩放比 X11 优秀得多。 在 Sway 配置文件中，你可以直接指定：
vim ~/.config/sway/config
  output <输出名称> scale 1.5

浏览器硬件加速
# 在 Wayland 下使用 Chrome 或 Firefox，即使装了驱动，默认也可能不调用 GPU 解码。
# Firefox: 环境变量设置 MOZ_ENABLE_WAYLAND=1。
# Chrome/Edge: 在地址栏输入 chrome://flags，搜索 Ozone 并将 Preferred Ozone platform 设为 Wayland。

环境变量设置
# 为了让各种开发工具（如 Qt/GTK 软件）原生运行在 Wayland 上而非通过 XWayland 转换，建议在 /etc/environment 中加入：
# XDG_SESSION_TYPE=wayland
# GDK_BACKEND=wayland
# QT_QPA_PLATFORM=wayland

检查是否在 Wayland 下正确调用了 Intel 显卡？
# 安装工具：sudo pacman -S libva-utils intel-gpu-tools
# 检查硬件加速状态： 执行 vainfo。 如果看到大量类似 VAEntrypointVLD 的列表，说明你的 Intel 视频加速已就绪。
# 实时查看显卡负载： 执行 sudo intel_gpu_top。 打开网页视频或 Sway 界面时，你可以看到 Render/3D 和 Video 引擎的占用百分比。

开启显示管理器 (登录界面)
sudo pacman -S sddm
sudo systemctl enable sddm

中文环境优化
# 进入图形界面后，你需要解决中文显示和输入问题：
# 安装中文字体： sudo pacman -S wqy-microhei wqy-zenhei noto-fonts-cjk
# 安装输入法（推荐 Fcitx5）： sudo pacman -S fcitx5-im fcitx5-chinese-addons fcitx5-pinyin-zhwiki fcitx5-configtool fcitx5-material-color
# fcitx5-im: 基础包组（包含核心和主要的输入模块）。
# fcitx5-chinese-addons: 包含拼音和五笔。
# fcitx5-pinyin-zhwiki: (可选) 维基百科词库，让联想词更智能。
# fcitx5-configtool: 图形化配置界面。
# 配置 Locale：将 /etc/locale.conf 改为 LANG=zh_CN.UTF-8。
sudo nvim /etc/environment
# 在文件中添加以下内容：
GTK_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
XMODIFIERS=@im=fcitx
SDL_IM_MODULE=fcitx
GLFW_IM_MODULE=ibus
# 注意：在纯原生 Wayland 应用中，有些应用可能不再依赖 GTK_IM_MODULE 而是直接通过 Wayland 的输入协议，但为了兼容性，上述设置仍是必需的。
# 编辑 ~/.config/sway/config，在文件末尾添加：
exec fcitx5 -d
# -d 参数表示以守护进程 (Daemon) 模式运行。

# 如果你经常需要在 TTY 下长时间工作（比如没有图形界面的时候），建议把 终端字体 也调大一点，这样配合改好的 Ctrl 键，体验会好很多： 在 /etc/vconsole.conf 中添加：
# FONT=ter-v32b  # 需要安装 terminus-font 包，这是公认 TTY 下最好看的字体之一
# ter-v24b 的具体含义
# 这是一种专为高分辨率屏幕设计的位图字体，拆解如下：
# ter: 代表 Terminus 字体家族（这是 Linux TTY 下公认最清晰、阅读体验最好的字体之一）。
# -v: 代表字符集编码。v 通常对应 Version 或特定的 VGA/Unicode 映射。
# 24: 代表字号（Size）。在这里是 24 像素高。对于 1080p 或 2K 屏幕，24 或 28 的大小能让你看清文字，不至于眯着眼睛，最大32
# b: 代表 Bold（加粗）。控制台字体通常有 n (normal) 和 b (bold) 之分。
# 实时切换字体测试
setfont ter-v24b
setfont ter-v32b

在TTY下把Capslock换成Control键，直接修改默认 US 布局
# 如果你觉得上面的方法都太麻烦，可以直接去修改系统默认的 us 布局文件（虽然这种做法不那么“优雅”，但绝对有效）。
# 找到默认布局文件： 通常在 /usr/share/kbd/keymaps/i386/qwerty/us.map.gz。
# 解压并修改：
cd /tmp
gzip -d -c /usr/share/kbd/keymaps/i386/qwerty/us.map.gz > us_fixed.map
# 编辑 us_fixed.map： 找到 keycode 58 = Caps_Lock，改为 keycode 58 = Control。
# 替换回系统目录：
gzip us_fixed.map
sudo cp us_fixed.map.gz /usr/share/kbd/keymaps/i386/qwerty/us.map.gz
# 然后在 /etc/vconsole.conf 中保持 KEYMAP=us 即可。
# 为了确保在系统启动的最早期阶段就加载这个配置，必须更新 initramfs:
sudo mkinitcpio -P
reboot
# 针对 Sway 环境（Wayland 设置）
# 当你输入 sway 进入桌面后，Sway 会接管键盘驱动，不再理会 TTY 的设置。你需要修改 Sway 的配置文件：
# 编辑配置：nvim ~/.config/sway/config
# 添加输入规则：
# 代码段
# input "type:keyboard" {
#     xkb_options ctrl:nocaps
# }
# 如果你想让左 Ctrl 变成 Caps Lock（即交换），可以使用 ctrl:swapcaps。
# 重载配置：按下 $mod+Shift+c 立即生效。

tmux 是现代 Linux 用户的首选。它不仅能让你在 TTY 里横向、纵向分屏，还能让你在掉线或退出后，重新连接并找回之前的会话。
# 常用快捷键（默认前缀键是 Ctrl+b）：
# 水平分屏：Ctrl+b 然后按 "
# 垂直分屏：Ctrl+b 然后按 %
# 切换窗口：Ctrl+b 然后按 方向键
# 关闭当前分屏：输入 exit 或 Ctrl+d
# 调整分屏大小：按住 Ctrl+b 的同时按 方向键

安装桌面环境 (DE) 或窗口管理器 (WM)
sudo pacman -S sway foot waybar wofi

完整的 PipeWire 音频方案
# 为了在 Sway 下获得最佳体验，建议一次性装齐：
sudo pacman -S pipewire pipewire-pulse pipewire-alsa pipewire-jack wireplumber
# pipewire-pulse: 替换老旧的 PulseAudio。
# pipewire-alsa: 让只支持 ALSA 的老软件也能发声。
# wireplumber: 必装，它是 PipeWire 的“大脑”，负责自动连接你的耳机和扬声器。
# 💡 一个有用的小工具
# 装完之后，如果你想看看音频是怎么流动的（类似于连线），可以装个图形化工具： sudo pacman -S qpwgraph 在 Sway 里打开它，你能看到非常直观的音频接线图。


waybar自动隐藏，背景透明，显示信息设置,.config/waybar/config


foot背景透明,.config/foot/foot.ini


vim设置,.vimrc


设置.zshrc


安装yay,添加中国源并pacman -S yay
设置arhlinuxcn库
1. 修改配置文件
使用你喜欢的文本编辑器（如 vim 或 nano）打开 /etc/pacman.conf：
Bash
sudo nano /etc/pacman.conf
在文件的末尾添加以下内容：
Ini, TOML
[archlinuxcn]
Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch
    💡 小建议： 这里使用的是中科大 (USTC) 的镜像源，你也可以根据自己的网络环境替换为清华大学 (TUNA) 或阿里云的镜像。
2. 更新并安装 GPG 密钥
添加仓库后，你需要同步数据并安装仓库的签名密钥，否则安装软件时会报错。
依次执行以下两条命令：
    同步仓库：
    Bash
    sudo pacman -Sy
    安装密钥环：
    Bash
    sudo pacman -S archlinuxcn-keyring
3. (可选) 安装 yay 或 paru
archlinuxcn 仓库里最受欢迎的工具莫过于 AUR 助手了。既然已经配置好了，可以直接安装：
Bash
sudo pacman -S yay
# 或者
sudo pacman -S paru
常见问题排查
如果安装 archlinuxcn-keyring 时报错提示“签名损坏”或“无法导入密钥”，通常是因为本地密钥环太旧。你可以尝试先运行：
Bash
sudo pacman-key --init
sudo pacman-key --populate archlinux

Vim 的快捷键（或者叫“指令”）多如繁星，其核心逻辑在于模式切换。要把 Vim 用顺手，建议将这些快捷键看作一套“动词 + 名词”的组合。
以下是按照功能分类的常用快捷键指南：
1. 模式切换（最基本操作）
    i: 进入插入模式 (Insert)，在光标前输入。
    Esc: 返回普通模式 (Normal)，这是所有操作的起点。
    :: 进入命令行模式 (Command)，用于保存、退出等。
    v: 进入可视模式 (Visual)，用于选取文本块。
2. 光标移动（普通模式）
除了方向键，Vim 的精髓在于不离主键盘区的移动：
    h j k l: 左、下、上、右。
    w / b: 移动到下一个/上一个单词开头。
    0 / $: 移动到行首 / 行尾。
    gg / G: 移动到文件第一行 / 最后一行。
    数字 + G: 跳转到指定行（如 10G 跳到第 10 行）。
3. 编辑与删除
在 Vim 中，删除通常也意味着“剪切”：
    x: 删除当前光标下的字符。
    dd: 删除（剪切）整行。
    dw: 删除一个单词。
    u: 撤销 (Undo)。
    Ctrl + r: 重做 (Redo)。
    yy: 复制当前行。
    p: 粘贴到光标后。
4. 搜索与替换
    /关键词: 向下搜索。按 n 跳到下一个，N 上一个。
    ?关键词: 向上搜索。
    :%s/旧/新/g: 全文替换（g 表示一行内多次匹配也替换）。
5. 保存与退出（命令行模式）
指令	动作
:w	仅保存
:wq	保存并退出 (常用的还有 :x 或大写 ZZ)
:q!	强制退出，不保存修改
:set nu	显示行号
6. 进阶“组合拳”
Vim 的强大在于指令可以叠加。公式通常是：[数字] + [操作] + [范围]。
    3dd: 删除 3 行。
    d$: 从当前位置删到行尾。
    ci": 更改双引号内的内容（change inside "），这在编程时极其好用。
    小贴士： 如果你是刚开始接触 Vim，可以在终端输入 vimtutor。这是 Arch Linux（以及大多数发行版）自带的交互式教程，只需 30 分钟就能让你从“进不去也出不来”变成初级选手。


在 Linux 命令行（通常是 Bash 或 Zsh）下，快捷键的操作逻辑其实深受 Emacs 和 Vim 的影响。掌握这些快捷键能让你在终端输入时像“弹钢琴”一样流畅。
以下是最高频使用的命令行快捷键：
1. 光标移动（再也不用狂按方向键）
    Ctrl + a: 跳转到行首（同 Home）。
    Ctrl + e: 跳转到行尾（同 End）。
    Alt + f: 光标前移一个单词（Forward）。
    Alt + b: 光标后移一个单词（Backward）。
    Ctrl + f / b: 光标前/后移动一个字符（不常用，通常直接用方向键）。
2. 文本编辑与删除（撤销利器）
    Ctrl + u: 剪切/删除从光标处到行首的所有内容。
    Ctrl + k: 剪切/删除从光标处到行尾的所有内容。
    Ctrl + w: 剪切/删除光标前的一个单词。
    Ctrl + y: 粘贴刚才用 Ctrl+u/k/w 删除的内容（相当于粘贴板）。
    Ctrl + t: 交换光标处及其前一个字符。
    Alt + t: 交换光标处及其前一个单词。
3. 历史记录与搜索
    Ctrl + r: 反向搜索历史命令。输入关键字，按 Ctrl+r 循环匹配（极其常用！）。
    Ctrl + g: 退出搜索模式。
    !!: 执行上一条命令（常用于漏写 sudo：sudo !!）。
    Alt + .: 插入上一条命令的最后一个参数。
4. 进程与会话控制
    Ctrl + c: 终止当前正在运行的进程。
    Ctrl + z: 挂起当前进程（放到后台，可用 fg 恢复）。
    Ctrl + d: 退出当前终端或注销（相当于输入 exit）。
    Ctrl + l: 清屏（等同于执行 clear）。
5. 自动补全（核心）
    Tab: 自动补全路径、文件名或命令。
    Tab + Tab: 列出所有可能的补全选项。
💡 进阶小技巧：你甚至可以在命令行用 Vim 模式
如果你觉得上述 Emacs 风格的快捷键（Ctrl+a/e）不够爽，想在命令行直接用 h/j/k/l 移动，可以在 Bash 中运行：
Bash
set -o vi
这样你按 Esc 就能进入命令行编辑的 Vim 模式。如果想永久生效，请将其加入你的 ~/.bashrc。


安装各种字体
在 Arch Linux（以及大多数使用 Fontconfig 的 Linux 发行版）中，管理和列出字体主要依靠 fc-list 工具。
以下是几种最常用的查看方式，你可以根据需要选择：
1. 列出所有已安装字体
如果你想简单粗暴地看到系统中所有的字体文件路径及其名称，直接运行：
Bash
fc-list
2. 仅列出字体名称 (推荐)
默认输出通常包含冗长的文件路径。如果你只想看字体的家庭名称 (Family Name)，可以使用冒号过滤：
Bash
fc-list : family
3. 按特定语言过滤 (例如中文)
这是在 Arch Linux 中最实用的命令之一，可以帮你快速确认中文字体是否安装成功：
Bash
fc-list :lang=zh
    提示： zh 代表中文，你也可以换成 ja (日语) 或 ko (韩语)。
4. 查找特定字体
如果你想确认某个特定的字体（如 "JetBrains" 或 "Noto"）是否在系统中，可以结合 grep 使用：
Bash
fc-list | grep -i "jetbrains"
常见格式汇总表
命令	用途
fc-list : family style	查看字体名称及风格（如 Bold, Italic）
fc-match -a "sans-serif"	列出所有匹配 "sans-serif" 定义的字体
fc-list : file	只列出字体文件的存放路径
进阶：如何查看字体在终端里的实际效果？
如果你安装了字体但不知道它长什么样，除了打开 LibreOffice 或文本编辑器查看外，你也可以安装 gucharmap (GNOME 字符映射表) 或 font-manager：
Bash
sudo pacman -S font-manager
运行 font-manager 后，你可以通过图形界面预览、对比和启用/禁用系统中的字体。


设置锁屏，swaylock-effects
1. 安装
确保你安装的是增强版。
    Arch Linux: paru -S swaylock-effects-git
2. 高颜值配置模板
请将以下代码放入你的 ~/.config/sway/config。我为你调校了一组非常现代化的参数：
Bash
# 定义高颜值锁屏命令
set $lock_cmd swaylock \
    --screenshots \
    --clock \
    --indicator \
    --indicator-radius 100 \
    --indicator-thickness 7 \
    --effect-blur 7x5 \
    --effect-vignette 0.5:0.5 \
    --ring-color bb00cc \
    --key-hl-color 880033 \
    --text-color ffffff \
    --line-color 00000000 \
    --inside-color 00000088 \
    --separator-color 00000000 \
    --fade-in 0.2
# 快捷键锁定
bindsym $mod+l exec $lock_cmd
# 配合 swayidle 实现自动锁定
exec swayidle -w \
    timeout 300 '$lock_cmd' \
    timeout 600 'swaymsg "output * power off"' \
    resume 'swaymsg "output * power on"' \
    before-sleep '$lock_cmd'
3. 参数深度解析（你可以按需微调）
    --screenshots: 抓取当前屏幕作为背景。
    --effect-blur 7x5: 核心魔术。7 是模糊半径，5 是迭代次数。数值越大越模糊，但也越吃资源。
    --effect-vignette 0.5:0.5: 加上暗角效果，让中间的解锁圆环和时钟更突出。
    --clock: 在屏幕上显示时间。
    --indicator: 显示那个会随敲击闪烁的圆环。
    --fade-in 0.2: 增加 0.2 秒的淡入动画，避免闪烁感，显得更高级。
    颜色代码 (RGBA): 例如 00000088，最后两位 88 代表透明度。
4. 常见问题：锁屏背景变黑？
如果你执行 $lock_cmd 后背景是黑的，通常是因为 swaylock-effects 没能成功截图。
    解决方法：确保你安装了 grim（Sway 的截图工具），有些发行版的 effects 版本依赖它来获取背景。
5. 最终效果预览
当你按下 $mod+L：
    当前的桌面会瞬间模糊成毛玻璃。
    四周会稍微变暗（暗角）。
    屏幕中心出现一个精致的时钟和圆环。
    敲击键盘时，圆环会有色彩反馈。
需要我帮你把“锁定前屏幕变暗”那个预警功能也整合进这个 effects 版本里吗？
为了实现这个功能，你需要安装一个小工具 brightnessctl（用于控制亮度）。
最终集成版配置
请将以下内容替换或添加到你的 ~/.config/sway/config 中：
Bash
### --- 智能电源管理与高颜值锁屏 --- ###
# 1. 定义锁屏样式 (swaylock-effects)
set $lock_cmd swaylock \
    --screenshots \
    --clock \
    --indicator \
    --indicator-radius 100 \
    --indicator-thickness 7 \
    --effect-blur 7x5 \
    --effect-vignette 0.5:0.5 \
    --ring-color bb00cc \
    --key-hl-color 880033 \
    --text-color ffffff \
    --line-color 00000000 \
    --inside-color 00000088 \
    --separator-color 00000000 \
    --fade-in 0.3
# 2. 自动化逻辑 (swayidle)
# 注意：使用 -n 参数可以在恢复时自动还原亮度
exec swayidle -w \
    timeout 270 'brightnessctl -s set 10%' resume 'brightnessctl -r' \
    timeout 300 '$lock_cmd' \
    timeout 600 'swaymsg "output * power off"' \
    resume 'swaymsg "output * power on"' \
    before-sleep '$lock_cmd'
# 3. 手动锁定快捷键
bindsym $mod+l exec $lock_cmd
逻辑解析：
    4.5 分钟 (270s)：系统发现你没动，brightnessctl 会把亮度降到 10%。如果你这时动一下鼠标，亮度会立刻恢复（resume），避免了直接锁屏的尴尬。
    5 分钟 (300s)：如果你还没理它，系统会执行 $lock_cmd，屏幕瞬间变幻为毛玻璃时钟界面。
    10 分钟 (600s)：显示器彻底断电进入省电模式。
    合盖/休眠前：确保无论如何都会先锁定，保护隐私。
避坑小贴士：
    权限配置：brightnessctl 可能需要你加入 video 用户组才能免 sudo 运行：
    Bash
    sudo usermod -aG video $USER
    (修改组后通常需要重新登录系统才生效)
    笔记本用户：如果你是台式机且显示器不支持 DDC/CI 调光，brightnessctl 可能无效。如果无效，你可以把第 270s 的动作换成其他提醒，或者直接删掉那一行。


自动隐藏鼠标
1. 核心工具：swayidle
swayidle 是 Sway 原生的闲置管理工具。它不只是用来锁屏的，它的逻辑是：“当 [事件发生] 时，执行 [这条命令]”。
2. 实现“锁屏时强制隐藏鼠标”
通常锁屏时（如使用 swaylock），如果鼠标指针停在屏幕中间会非常碍眼。你可以在 Sway 配置文件中这样写：
Bash
exec swayidle -w \
    timeout 300 'swaymsg "seat * hide_cursor 1"' \
    resume 'swaymsg "seat * hide_cursor 5000"'
逻辑拆解：
timeout 300: 当你 300 秒（5 分钟）没动电脑时。
swaymsg "seat * hide_cursor 1": 立即执行命令，将隐藏延迟改为 1 毫秒（相当于视觉上的瞬间消失）。
resume: 当你重新移动鼠标或敲击键盘唤醒系统时。
swaymsg "seat * hide_cursor 5000": 将延迟恢复到正常的 5 秒。


多显示器设置
在配置之前，你需要知道系统是如何识别你的显示器的。 执行以下命令：
swaymsg -t get_outputs
确保你的 ~/.config/kanshi/config 结构正确。一个典型的双屏自动切换配置应该是这样的：
代码段
# 只有笔记本屏幕时
profile {
    output eDP-1 enable mode 1920x1080 position 0,0
}
# 实验室外接 HDMI 屏幕时
profile {
    output eDP-1 enable mode 1920x1080 position 0,0
    output HDMI-A-1 enable mode 2560x1440 position 1920,0
}
自动启动：在 ~/.config/sway/config 中加入：
代码段
exec kanshi


电源键及合盖设置
通过 logind 全局配置（最推荐）
如果你希望无论是否进入 Sway，电源键的行为都保持一致（例如：按下即休眠），这是最稳妥的方法。
    编辑配置文件： 使用 sudo 权限打开 /etc/systemd/logind.conf。
    修改相关参数： 找到以下几行，取消注释（去掉 #）并修改为你想要的行为：
        HandlePowerKey=suspend （按下电源键时休眠）
        HandleLidSwitch=suspend （合上盖子时休眠）
    应用配置： 执行以下命令重启服务（注意：这可能会导致当前的登录会话短暂重连）：
    Bash
    sudo systemctl restart systemd-logind
    可选值： ignore (忽略), poweroff (关机), reboot (重启), halt (停止), suspend (待机/休眠到内存), hibernate (休眠到硬盘), lock (锁屏)。


安装clash-verge-rev-bin并设置
在 Arch Linux (Sway) 环境下，clash-verge-rev-bin 无法安装 TUN 模式通常是因为权限限制或服务模式（Service Mode）未正确配置。
由于 Sway 是 Wayland 协议，有时 GUI 触发的 root 权限请求（polkit）可能无法弹出，导致“安装服务”静默失败。你可以按照以下步骤手动修复。
注意：如果升级版本，要先sudo clash-verge-service-uninstall 再 sudo clash-verge-service-install
方法一：手动安装服务（推荐）
这是解决“点击安装没反应”或“安装失败”最彻底的方法。
    停止应用：彻底关闭 Clash Verge Rev。
    执行安装脚本： 该软件包通常自带了安装服务的脚本，直接通过终端运行：
    sudo clash-verge-service-install
    启动并启用服务：
    sudo systemctl enable --now clash-verge-service
    重启应用：再次进入设置，你会发现“服务模式”已显示为“已安装”，此时即可开启 TUN 模式。
最简单的方法：使用 Sway 配置启动
编辑你的 Sway 配置文件 ~/.config/sway/config，在文件末尾添加一行：
代码段
# 启动 Clash Verge
exec clash-verge
如何让它“后台”启动？
Clash Verge 本身支持“启动时最小化”。
    打开 Clash Verge 界面。
    进入 Settings (设置)。
    找到 Start on Login (开机自启) 和 Start Minimized (启动时最小化) 并开启。
    这样 Sway 启动它时，它会自动进入系统托盘，而不会弹出一个大窗口挡住你。


配置 Shell 启动 Sway
自动登录后，系统会停在 TTY1 的 shell 提示符处。我们需要在 shell 的初始化文件中加入逻辑：如果是 TTY1 且没有显示环境，则启动 Sway。
根据你使用的 Shell，修改对应文件：
如果你使用 Zsh (推荐)
编辑 ~/.zprofile (或 ~/.zshrc)：
Bash
# 自动启动 Sway
if [ -z "$DISPLAY" ] && [ "$(tty)" = "/dev/tty1" ]; then
  exec sway
fi
如果你使用 Bash
编辑 ~/.bash_profile：
Bash
if [ -z "$DISPLAY" ] && [ "$(tty)" = "/dev/tty1" ]; then
  exec sway
fi
注意：使用 exec sway 而不是直接写 sway。这样当你说“退出 Sway”时，系统会直接退出登录回到 TTY，而不是停留在 shell 里，更加安全且优雅。


1. 现代简约派：power-profiles-daemon
这是目前 GNOME 和 KDE 默认使用的方案，也是最符合现代硬件（尤其是 Intel/AMD 的 P-State）标准的。它提供“节能”、“平衡”、“性能”三个档位。
安装与启动
Bash
sudo pacman -S power-profiles-daemon
sudo systemctl enable --now power-profiles-daemon
使用方法
    查看当前模式：powerprofilesctl list
    切换模式：powerprofilesctl set performance 或 balanced
    Sway 集成：你可以通过 Waybar 的 power-profiles-daemon 模块在状态栏显示并切换模式。
问题解决
BULIBULI% powerprofilesctl list
Traceback (most recent call last):
  File "/usr/bin/powerprofilesctl", line 8, in <module>
    from gi.repository import Gio, GLib
ModuleNotFoundError: No module named 'gi.repository'
这个报错是一个典型的 Python 依赖缺失问题。在 Arch Linux 中，powerprofilesctl 是一个 Python 脚本，它依赖 python-gobject（也称为 PyGObject）来与系统的 D-Bus 接口通信。
即使安装了 power-profiles-daemon，由于某种原因（比如精简安装或手动清理），这个 Python 库可能没被装上。
解决方法：安装缺失的 Python 库
请运行以下命令来安装必要的底层库：
Bash
sudo pacman -S python-gobject
安装完成后，再次尝试执行：
Bash
powerprofilesctl list


麦克风控制
方案 A：使用 wpctl (PipeWire 原生)
这是目前最现代的方法，不需要依赖旧的 PulseAudio 协议。
功能	命令
切换静音	wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
增加音量	wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 5%+
减小音量	wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 5%-
解决问题
1. 修正命令参数
在 wpctl 中，默认麦克风的正确写法通常是 @DEFAULT_AUDIO_SOURCE@。
请尝试执行这个更准确的命令：
Bash
wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
注：如果你写的是 @DEFAULT_SOURCE@，某些版本的 PipeWire 可能会由于无法解析而报错或无反应。
2. 解决 RTKit 警告（让系统更稳定）
虽然这些警告不一定会阻止命令运行，但解决掉它们能让音频性能更好（减少爆音、延迟）。
解决方法：安装并启动 RTKit
    安装：
    Bash
    sudo pacman -S rtkit
    启动并设置开机自启：
    Bash
    sudo systemctl enable --now rtkit-daemon.service
完成后再次执行 wpctl，那两条警告应该就消失了。
3. 检查命令是否真的执行成功了？
即便有警告，命令可能已经生效了。你可以通过以下命令检查麦克风的当前状态：
Bash
wpctl get-volume @DEFAULT_AUDIO_SOURCE@
    如果显示 Volume: 0.50 [MUTED]，说明已经成功静音。
    如果显示 Volume: 0.50，说明是开启状态。
4. 深度排查：为什么按下按键没反应？
如果手动输入上面的命令可以控制麦克风，但按键依然没反应，那问题出在 Sway 的按键映射上：
    确认按键代号： 有些笔记本的麦克风键可能不叫 XF86AudioMicMute。请运行 wev，按下该键，看 sym: 后面跟着的到底是什么字符串。
    Sway 配置刷新： 修改 ~/.config/sway/config 后，务必按下 $mod+Shift+c。
    权限问题： 确保你的用户在 audio 组中（虽然现代 Arch/PipeWire 通常不需要，但可以作为保底排查）：
    Bash
    sudo usermod -aG audio $USER
开机默认关闭麦克风
编辑 ~/.config/sway/config，在文件末尾添加：
代码段
# 开机自动静音默认麦克风
exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ 1
    1 代表静音（Mute），0 代表取消静音（Unmute）。
    这样每次你登录进入 Sway 桌面时，麦克风都会被强制设为静音状态。


开机禁用摄像头
在 Linux 系统中（尤其是 Arch Linux），控制摄像头最彻底且安全的方法是利用内核模块 (Kernel Modules)。
由于摄像头通常由 uvcvideo 驱动程序控制，你可以通过配置内核参数，在开机时禁用该驱动，或者将其列入黑名单。
以下是几种方案，按推荐程度排序：
方案一：使用内核模块黑名单（最推荐，物理级禁用）
这种方法会让系统在开机时不加载摄像头驱动，任何软件（包括浏览器、Zoom等）都检测不到摄像头的存在。
    创建黑名单配置文件： 使用 sudo 权限创建一个配置文件：
    Bash
    sudo nano /etc/modprobe.d/disable-camera.conf
    写入以下内容：
    Plaintext
    blacklist uvcvideo
    如何临时恢复： 如果你偶尔需要用摄像头，不需要删掉文件，只需手动加载驱动即可：
    Bash
    sudo modprobe uvcvideo
    用完后想再次关闭：sudo modprobe -r uvcvideo。


neovim + lazyvim
安装方法极其简单：
Bash
# 备份旧配置
mv ~/.config/nvim ~/.config/nvim.bak
# 克隆模板
git clone https://github.com/LazyVim/starter ~/.config/nvim
# 删掉 .git 文件夹以便你自己控制配置
rm -rf ~/.config/nvim/.git
# 启动
nvim
在 LazyVim 中，快捷键极其丰富。由于你刚安装好，掌握以下这些最常用的快捷键就能应付 90% 的场景了。
    注意： 下文中的 <leader> 键默认是 空格键 (Space)。
1. 核心管理 (Critical)
快捷键	功能
<leader>l	打开 Lazy 插件管理页面 (更新、安装)
<leader>m	打开 Mason 管理页面 (安装 LSP/Linter/Formatter)
<leader>f f	查找文件 (Find Files)
<leader>/	全局搜索 文字 (Live Grep)
<leader>e	打开/关闭 文件树 (Neo-tree)
2. 文件与窗口管理
快捷键	功能
<leader>w	保存文件 (Save)
<leader>q	退出 (Quit)
**`	`**
<leader>-	水平拆分窗口 (Split down)
Ctrl + h/j/k/l	在不同窗口间跳转 (左/下/上/右)
3. 编辑与缓冲区 (Tabs/Buffers)
LazyVim 顶部显示的像标签页一样的其实是 Buffer： | 快捷键 | 功能 | | :--- | :--- | | [b | 上一个缓冲区 (Previous buffer) | | ]b | 下一个缓冲区 (Next buffer) | | <leader>bb | 切换到上一个缓冲区 | | <leader>bd | 关闭当前缓冲区 (Close buffer) |
4. LSP 编程辅助 (代码跳转/重构)
这些键通常在光标停在变量名上时有效： | 快捷键 | 功能 | | :--- | :--- | | gd | 转到定义 (Go to Definition) | | gr | 列出所有引用 (References) | | K | 显示悬浮文档 (Hover doc) | | <leader>cr | 重命名 变量 (Rename) | | <leader>ca | 代码行为 (Code Action，如修复错误) | | <leader>cf | 格式化 代码 (Format) |
5. 如何查看所有快捷键？
LazyVim 内置了 which-key.nvim。如果你忘记了某个快捷键，只需：
    按下空格键 (<leader>) 并等待 1 秒。
    底部会弹出一个菜单，列出当前所有可用的后续按键及其功能。
    如果你想搜索某个特定的快捷键，输入：
    Vim Script
    :WhichKey


Emacs + doom emacs安装：
Bash
git clone --depth 1 https://github.com/doomemacs/doomemacs ~/.config/emacs
~/.config/emacs/bin/doom install
Doom Emacs 的快捷键系统极其庞大，它默认采用 Evil Mode（Vim 模拟），并以 SPC（空格键）作为 Leader Key。这种设计让你可以通过类似连招的方式快速调用功能。
以下是最高频、最核心的快捷键分类整理：
1. 基础中的基础
这些是你生存的根本，几乎所有操作都从空格开始。
快捷键	功能
SPC SPC	查找文件 (在项目中)
SPC .	浏览文件 (在当前目录)
SPC ,	切换 Buffer (在已打开的文件间切换)
SPC /	全局搜索 (在项目内搜索字符串)
SPC :	执行命令 (类似 Vim 的 :)
SPC q r	重启 Doom Emacs
2. 窗口管理 (SPC w)
不用鼠标，快速切分你的屏幕。
    SPC w v：纵向平分窗口 (Vertical split)
    SPC w s：横向平分窗口 (Horizontal split)
    SPC w h/j/k/l：向 左/下/上/右 移动光标
    SPC w c：关闭当前窗口
    SPC w =：平衡所有窗口大小
3. Buffer 与 文件管理 (SPC b / SPC f)
Buffer 是 Emacs 对“打开的文件”的称呼。
    SPC b b：切换 Buffer
    SPC b d：关闭当前 Buffer (Kill buffer)
    SPC f s：保存文件
    SPC f r：打开最近访问的文件 (Recent files)
    SPC f P：打开你的 Doom 配置文件 (config.el 等)
4. 项目管理 (SPC p)
Doom 对项目（通常是 Git 仓库）的支持非常强大。
    SPC p p：切换项目
    SPC p a：向项目添加新文件
    SPC p t：打开侧边栏文件树 (Treemacs/Neotree)
5. 代码与编辑
利用 LSP 和内置插件实现的高级操作。
    g d：跳转到定义 (Go to definition)
    g r：查找引用 (Go to references)
    K：在悬浮窗查看文档说明
    SPC c a：执行代码修复动作 (Code actions)
    SPC i s：插入 Emoji 表情（很有趣的功能）
    M-x (Alt + x)：手动输入并搜索任何 Emacs 命令
6. Git 操作 (SPC g)
Doom 集成了地表最强 Git 客户端 Magit。
    SPC g g：打开 Magit 状态面板 (在这你可以暂存、提交、推送)
    SPC g l：查看 Git 日志 (Log)
    SPC g b：查看每一行代码是谁写的 (Blame)
💡 小贴士：如何“自学”快捷键？
如果你忘记了某个快捷键，别担心：
    按 SPC 然后停顿一秒：底部会弹出一个名为 Which-key 的面板，告诉你接下来的所有可能选项。
    SPC h k：输入一个快捷键，它会解释这个快捷键是干什么的。
    SPC h b b：搜索当前模式下所有的快捷键绑定。


ranger
如果你还没有配置文件，先生成一份：
ranger --copy-config=all
Ranger 的魅力在于它是一套“长在手指上”的工具。它的快捷键逻辑高度致敬 Vim，掌握了规律后基本不需要思考。
为了方便记忆，我将最实用的快捷键按场景进行了分类：
1. 基础导航（Vim 逻辑）
    h j k l：左（父目录）、下、上、右（进入目录/打开文件）。
    gg：跳到顶部。
    G：跳到底部。
    Ctrl + u / d：向上/向下翻半页。
    H / L：历史记录的前进和后退。
    ] / [：在同级目录中移动（不进入）。
2. 文件操作（增删改查）
    Space (空格)：选中/取消选中文件（支持多选）。
    v：反选/全选。
    yy：复制 (yank)。
    dd：剪切 (cut)。
    pp：粘贴 (paste)。
    po：覆盖粘贴（如果目标已存在）。
    cw：重命名 (change word)。
    I / A：在文件名开头/结尾插入字符。
    dD：永久删除（会有确认确认提示）。
3. 标签页管理 (Tabs)
在 Arch/Sway 下处理多个目录时非常高效：
    gn 或 Ctrl + n：新建标签页。
    gt / gT：切换到上一个/下一个标签页。
    Alt + [1-9]：跳转到指定标签页。
    gc：关闭当前标签页。
4. 搜索与过滤
    /：向下搜索文件。
    n / N：跳到搜索结果的下一个/上一个。
    f：快速定位（输入首字母直接跳到文件）。
    zf：实时过滤（Filter）。这是最实用的功能之一，输入关键字，窗口只显示匹配的文件，按 Esc 退出过滤。
5. 视图与排序
    zh：切换显示隐藏文件。
    zp：开启/关闭文件预览功能。
    zm：切换鼠标支持。
    o[字母]：更改排序方式（例如 os 按大小排序，ot 按修改时间排序）。
6. 命令执行 (Shell 联动)
    S（大写）：在当前目录下打开终端（输入 exit 返回 Ranger）。
    :：进入命令模式。
    r：选择打开方式（Open with...）。
    du：显示当前目录的磁盘占用。
💡 一个必须知道的“保命”快捷键
如果你配置乱了或者卡住了：
    W：打开日志窗口（查看报错信息）。
    R：强制刷新当前目录（重新加载配置）。
    进阶小贴士： 你可以随时输入 ?k 查看 Ranger 完整的快捷键列表，或者输入 ?m 查看当前绑定的所有命令。


在 Sway (Wayland) 环境下，截图不像在 GNOME 或 KDE 那样开箱即用，它通常需要几个小工具相互配合。最主流且最高效的方案是使用 grim、slurp 和 swappy。
1. 核心工具包安装
首先，安装这三个各司其职的工具：
    grim: 截图核心工具（负责抓取屏幕内容）。
    slurp: 选区工具（负责让你用鼠标拉出一个框）。
    swappy: 标注工具（负责给截图画箭头、写字、打马赛克）。
    wl-copy: 剪贴板工具（将截图直接存入剪贴板）。
Bash
sudo pacman -S grim slurp swappy wl-clipboard
2. 常用截图场景命令
在修改配置文件前，你可以先在终端尝试这些命令，看看哪种最符合你的习惯：
    全屏截图并保存： grim ~/Pictures/$(date +%Y%m%d_%H%M%S).png
    选择区域截图并保存： grim -g "$(slurp)" ~/Pictures/$(date +%Y%m%d_%H%M%S).png
    选择区域并直接复制到剪贴板（不产生文件）： grim -g "$(slurp)" - | wl-copy
    截图后立即编辑（标注）： grim -g "$(slurp)" - | swappy -f -
3. 配置 Sway 快捷键
打开你的 Sway 配置文件（通常是 ~/.config/sway/config），添加以下配置。这里我推荐使用 Print 键或 $mod+Shift+S：
Bash
# 1. 全屏截图 (保存到图片目录)
bindsym Print exec grim ~/Pictures/Screenshot_$(date +%Y%m%d_%H%M%S).png
# 2. 选区截图并直接进入标注界面 (推荐)
# 标注完成后点击 swappy 里的保存按钮，默认存到 ~/Pictures
bindsym $mod+Shift+s exec grim -g "$(slurp)" - | swappy -f -
# 3. 选区截图并直接复制到剪贴板 (不保存文件)
bindsym $mod+Alt+s exec grim -g "$(slurp)" - | wl-copy
修改完成后，按下 $mod+Shift+C 重新加载 Sway 配置即可生效。
4. 进阶：Swappy 的个性化设置
如果你觉得 Swappy 默认保存路径不对，可以创建配置文件 ~/.config/swappy/config：
Ini, TOML
[Default]
save_dir=$HOME/Pictures/Screenshots
save_filename_format=swappy-%Y%m%d-%H%M%S.png
show_panel=false
line_size=5
text_size=20


在 Arch Linux + Sway（Wayland 协议）环境下运行 Steam，通常是因为缺少必要的 32 位库、显卡驱动，或者是 Steam 与 Wayland 的兼容性小摩擦导致的。
我们可以按照以下步骤排查，定位问题的真凶：
1. 开启终端调试（最重要的第一步）
不要直接点击图标，在终端输入 steam 并回车。
    如果没有任何输出：可能是程序卡在了死锁状态，先执行 pkill -9 steam 清理后台。
    如果有错误代码：请留意是否包含 libGL error 或 error while loading shared libraries，这是解决问题的核心线索。
2. 检查 Multilib 仓库与 32 位驱动
Steam 是一个 32 位应用，即使你用的是 64 位系统，也必须安装大量的 32 位支持库。
    确认 /etc/pacman.conf 中开启了 [multilib] 仓库：
    Ini, TOML
    [multilib]
    Include = /etc/pacman.d/mirrorlist
    安装显卡对应的 32 位驱动： 根据你的显卡类型，确保安装了以下包（这是最常见的“启动无反应”原因）：
显卡类型	必装的 32 位驱动包
NVIDIA	lib32-nvidia-utils
AMD	lib32-mesa 和 lib32-vulkan-radeon
Intel	lib32-mesa 和 lib32-vulkan-intel
3. Sway/Wayland 环境适配
虽然 Steam 已经在适配 Wayland，但有时候它仍需要 Xwayland 作为桥梁。
    确认安装了 Xwayland：sudo pacman -S xorg-xwayland
    尝试禁用环境变量干扰：有些用户在 ~/.bash_profile 里强制开启了 SDL_VIDEODRIVER=wayland，这可能导致 Steam 奔溃。尝试用以下命令启动看是否恢复：
    Bash
    env SDL_VIDEODRIVER=x11 steam
4. 重置 Steam 运行时
如果 Steam 更新到一半卡住了，也会出现“启动无反应”。你可以尝试重置它的安装状态（这不会删除你的游戏）：
Bash
steam --reset
5. 常见的小坑
    网络连接：Steam 启动时会尝试连接服务器检查更新，如果网络环境不佳（没挂代理或镜像），它可能会静默等待很久。
    字体问题：有时缺失特定字体会导致 UI 无法渲染，建议安装 ttf-liberation。


fuzzel 是 Sway 环境下非常受欢迎的启动器，它比 wofi 更轻量，且原生支持 Wayland 渲染，非常适合追求简约的 Arch 用户。
1. 安装 fuzzel
首先确保你已经安装了它：
Bash
sudo pacman -S fuzzel
2. 创建配置文件
Fuzzel 默认寻找 ~/.config/fuzzel/fuzzel.ini。如果文件夹不存在，请手动创建：
Bash
mkdir -p ~/.config/fuzzel
touch ~/.config/fuzzel/fuzzel.ini
3. 配置示例 (fuzzel.ini)
将以下内容粘贴到 fuzzel.ini 中，这是一个美观且实用的基础配置：
Ini, TOML
# 字体设置
font=JetBrainsMono Nerd Font:size=12
# 终端模拟器（用于运行终端应用）
terminal=foot -e 
# 窗口外观
[main]
fields=name,generic,comment,executable
icon-theme=Papirus
width=30
tabs=4
horizontal-pad=20
vertical-pad=10
inner-pad=5
# 颜色设置（这里以暗色调为例）
[colors]
background=282a36ff
text=f8f8f2ff
match=8be9fdff
selection=44475aff
selection-text=f8f8f2ff
border=bd93f9ff
[border]
width=2
radius=10
4. 在 Sway 中绑定快捷键
编辑你的 ~/.config/sway/config，找到原本绑定 dmenu 或 wofi 的那一行，修改为 fuzzel：
代码段
# 建议绑定到 $mod+d (默认通常是这个)
bindsym $mod+d exec fuzzel
修改完成后，按下 $mod + Shift + c 重载 Sway 配置。
5. 进阶：作为 Power Menu (关机菜单)
Fuzzel 也可以用来做关机菜单。你可以创建一个简单的脚本 powermenu.sh:
Bash
#!/bin/bash
SELECTION=$(printf "🔒 Lock\n󰗽 Logout\n󰤄 Suspend\n Reboot\n⏻ Shutdown" | fuzzel --dmenu --p "Power: ")
case "$SELECTION" in
    "*Lock") swaylock ;;
    "*Logout") swaymsg exit ;;
    "*Suspend") systemctl suspend ;;
    "*Reboot") systemctl reboot ;;
    "*Shutdown") systemctl poweroff ;;
esac
赋予执行权限 chmod +x powermenu.sh 后，在 Sway 里给它绑一个快捷键，你会发现比安装专门的插件好用得多。
常见调试
    图标不显示：确保你安装了图标库，如 sudo pacman -S papirus-icon-theme。
    圆角没生效：如果你的 Sway 版本较旧或没有打补丁，可能不支持边框圆角渲染，但 Fuzzel 本身在支持 Wayland 协议的合成器上表现很好。


在 Arch Linux 中，有许多优秀的软件可以用来查看磁盘和目录的占用情况。根据你的偏好（命令行或图形界面），以下是目前最推荐的几款工具：
1. 终端交互工具 (CLI/TUI)
如果你经常在终端操作，这几款工具不仅速度快，而且交互性极强。
ncdu (NCurses Disk Usage)
这是最经典、最常用的 TUI 工具。它会扫描目录并提供一个可以上下跳转的列表，支持直接在软件内删除文件。
    特点： 轻量、稳定、操作直观。
    安装： sudo pacman -S ncdu
    使用： 在你想扫描的目录下运行 ncdu。
gdu (Go Disk Usage)
这是 ncdu 的高性能替代品，使用 Go 编写，专门为 SSD 进行了并行处理优化。
    特点： 速度极快，在大容量 SSD 上优势明显，界面带有颜色区分。
    安装： sudo pacman -S gdu
    使用： gdu
dua (Disk Usage Analyzer)
如果你追求现代化的极致体验，dua（Rust 编写）是很好的选择。
    特点： 支持交互模式（dua i），界面现代，计算速度也是顶尖水平。
    安装： sudo pacman -S dua-cli
    使用： dua i
2. 图形化工具 (GUI)
如果你喜欢用鼠标点击，或者希望通过“饼图”或“方块图”直观看到哪里占用了空间：
Filelight (KDE 家族)
    特点： 采用同心圆环图展示。点击圆环可以深入每一层目录，视觉化效果非常好。
    安装： sudo pacman -S filelight
Baobab (GNOME 磁盘占用分析器)
    特点： 界面简洁明了，支持树状列表和饼图/矩形树图双重显示。
    安装： sudo pacman -S baobab
QDirStat / KDirStat
    特点： 采用矩形树图 (Treemap)。文件越大，色块越大。它在清理服务器残留或寻找大视频文件时非常高效。
    安装： sudo pacman -S qdirstat
3. 基础系统命令
如果不安装新软件，Arch 自带的命令也能快速解决问题：
    查看磁盘分区整体占用： df -h
    查看当前目录下各文件夹大小（不递归显示深层文件）： du -sh * | sort -h


在 Waybar 中显示蓝牙状态，最优雅且主流的方法是使用 Waybar 内置的 bluetooth 模块。它不需要你编写复杂的脚本，就能实现显示连接状态、设备名称以及点击打开管理器等功能。
以下是具体的配置步骤：
1. 修改 Waybar 配置文件
打开你的 Waybar 配置文件（通常在 ~/.config/waybar/config 或 ~/.config/waybar/config.jsonc），按照以下步骤操作：
第一步：在 modules-right（或你喜欢的位置）添加 "bluetooth"：
JSON
"modules-right": [
    "bluetooth", 
    "network", 
    "pulseaudio", 
    "clock", 
    "tray"
],
第二步：定义 bluetooth 模块的具体配置： 将以下代码添加到配置文件中（与其他模块平级）：
JSON
"bluetooth": {
    "format": " {status}",
    "format-disabled": "󰂲 off", // 蓝牙关闭时的图标
    "format-connected": " {num_connections} connected",
    "tooltip-format": "{controller_alias}\t{controller_address}",
    "tooltip-format-connected": "{controller_alias}\t{controller_address}\n\n{device_enumerate}",
    "tooltip-format-enumerate-connected": "{device_alias}\t{device_address}",
    "on-click": "blueman-manager" // 点击图标打开图形管理界面
},
    注意：图标（如 ）需要安装 Font Awesome 或 Nerd Fonts 才能正常显示。如果你看到的是乱码，请执行 sudo pacman -S ttf-font-awesome。
2. 美化样式 (Optional)
打开你的样式表 ~/.config/waybar/style.css，为蓝牙模块添加一些视觉区分：
CSS
#bluetooth {
    background-color: #2980b9;
    color: white;
    padding: 0 10px;
    border-radius: 4px;
}
#bluetooth.connected {
    background-color: #27ae60; /* 连接成功时显示绿色 */
}
#bluetooth.disabled {
    background-color: #7f8c8d; /* 关闭时显示灰色 */
}
3. 安装依赖工具 (让点击生效)
在上面的配置中，我们设置了 "on-click": "blueman-manager"。为了让这个功能生效，建议安装 blueman：
Bash
sudo pacman -S blueman
4. 重载 Waybar
保存文件后，在终端运行以下命令重载 Waybar 查看效果：
Bash
pkill waybar && waybar &
进阶提示：为什么我看不到蓝牙图标？
    服务未启动：请确保 systemctl is-active bluetooth 返回的是 active。
    RF-Kill 锁定：如果蓝牙是 soft blocked，Waybar 也会显示已关闭。可以输入 rfkill unblock bluetooth 解锁。
    字体缺失：Waybar 的图标高度依赖字体补丁。推荐安装 ttf-jetbrains-mono-nerd。
在 Sway 配置中设置浮动规则
打开你的 Sway 配置文件 ~/.config/sway/config，添加以下规则：
代码段
# 根据标题(title)将窗口设为浮动
for_window [title="bluetooth-manager"] floating enable, resize set 600 400, move position center
# 或者根据 app_id (如果你在终端启动时指定了 app-id)
# for_window [app_id="bluetooth-manager"] floating enable, resize set 600 400
    floating enable: 启用浮动模式。
    resize set 600 400: 设置窗口大小（宽600，高400），你可以根据 Redmi Book 16 的高分辨率屏幕调整大一点（比如 800 600）。
    move position center: 让它出现在屏幕正中央。
进阶：如果你想让它像“下拉菜单”一样
如果你希望这个窗口更像一个插件，可以尝试将它固定在屏幕顶部：
代码段
for_window [title="bluetooth-manager"] {
    floating enable
    resize set 800 500
    move position center
    # 甚至可以添加边框颜色区分
    border pixel 2
}
为什么建议用 title 而不是 app_id？
对于终端模拟器来说，app_id 通常固定为 foot 或 kitty，如果你针对 app_id 设置浮动，那么你打开的所有终端都会变成浮动的。使用 --title 标记可以精准打击，只让蓝牙窗口浮动。
如果你安装的是 Blueman（图形化界面），确定它的窗口属性其实比终端更简单，因为它的 app_id 是固定的。
在 Sway 下，Blueman 的主窗口通常有两个标识：
    app_id: blueman-manager
    title: Bluetooth Devices
1. 验证准确的标识符
最科学的方法是让 Sway 告诉你当前窗口的身份。请执行以下步骤：
    打开 blueman-manager 窗口。
    在终端输入以下命令：
    Bash
    swaymsg -t get_tree | grep -E "blueman-manager|Bluetooth Devices"
    你会看到类似 "app_id": "blueman-manager" 或 "name": "Bluetooth Devices" 的字段。


在 Waybar 上显示亮度，通常使用其内置的 backlight 模块。对于你的 Redmi Book Pro 16 2024，由于它搭载了 Intel Ultra 7 的 Arc 核显，亮度调节通常是非常灵敏且标准的。
以下是实现步骤：
1. 准备工作：确保有权限控制亮度
在 Arch Linux 中，普通用户默认可能没有权限直接修改 /sys/class/backlight。
    安装工具：推荐使用 brightnessctl，它轻量且在 Wayland 下表现稳定。
    Bash
    sudo pacman -S brightnessctl
    加入用户组：将自己加入 video 组（通常不需要重启，但建议重新登录）：
    Bash
    sudo usermod -aG video $USER
2. 配置 Waybar 模块
打开 ~/.config/waybar/config，在相应位置添加模块：
第一步：在布局中加入 "backlight"：
JSON
"modules-right": [
    "backlight",
    "bluetooth",
    "pulseaudio",
    "clock"
],
第二步：配置模块参数：
JSON
"backlight": {
    "device": "intel_backlight", // Redmi Book 16 默认通常是这个
    "format": "{icon} {percent}%",
    "format-icons": ["󰃞", "󰃟", "󰃠"], // 需要 Nerd Fonts
    "on-scroll-up": "brightnessctl set 5%+",
    "on-scroll-down": "brightnessctl set 5%-",
    "min-length": 6
},
3. 配置 Sway 快捷键
为了让 Redmi Book 键盘顶部的亮度键（F1, F2 或 Fn+F1/F2）生效，在 ~/.config/sway/config 中添加：
代码段
# 亮度增加
bindsym XF86MonBrightnessUp exec brightnessctl set 5%+
# 亮度减少
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-
4. 样式美化 (CSS)
打开 ~/.config/waybar/style.css，让它看起来更精致：
CSS
#backlight {
    background-color: #f1c40f;
    color: #2c3e50;
    padding: 0 10px;
    border-radius: 4px;
    margin-right: 5px;
}
5. 故障排除：如果找不到设备
如果你的 Waybar 亮度显示为 0% 或者干脆不显示，请在终端输入：
Bash
ls /sys/class/backlight/
如果输出是 intel_backlight，则在 Waybar 配置中保持默认；如果输出是其他名字（如 acpi_video0），请将 Waybar 配置中的 "device" 字段修改为该名字。
小贴士：由于你的 Redmi Book 拥有 3.1K 屏幕，如果你觉得亮度调节的步进（5%）太小，可以把 5%+ 改成 10%+。

在系统冷启动或重启进入时不显示waybar上不显示亮度信息的解决办法：把waybar移出bar{}之外来独立触发
既然你目前是在 Sway 的原生 bar {} 模块中启动 Waybar，那么迁移的过程其实是**“解耦”**的过程：让 Sway 只负责窗口管理，让 Waybar 作为一个独立的 Wayland 客户端运行。
以下是详细的操作步骤：
第一步：清理 config 中的旧代码
打开你的 Sway 配置文件（通常在 ~/.config/sway/config），找到 bar { ... } 这一块。
你需要将其彻底注释掉或删除：
代码段
# 找到这段代码并注释掉
# bar {
#     swaybar_command waybar
#     ... 其他颜色或位置配置 ...
# }
为什么要删掉？ 因为当 Waybar 在 bar {} 内部运行时，Sway 会尝试去管理它的生命周期，并将其作为 swaybar 协议的一部分。移出之后，我们要把它当作一个普通的后台程序（像 swayidle 一样）来处理。
第二步：添加独立启动指令
在配置文件的末尾（或者专门放 exec 语句的地方），添加以下代码：
代码段
exec vs exec_always
    exec：仅在 Sway 首次启动时执行一次。当你按下 $mod+Shift+c（reload）时，它不会再次运行。
    exec_always：每次启动和重新加载配置时都会执行。
当你把 Waybar 移出 bar {} 后，如果使用的是 exec，那么 reload 之后旧进程被删了（如果你配置里有 pkill）或者 Sway 只是重读配置，它不会去触发那个 sleep 2 && waybar。
# 使用 sleep 确保亮度驱动 (backlight) 和网络驱动 (network) 已就绪
exec_always sleep 2 && waybar
如果你想更优雅一点： 为了防止多次重载（reload）配置导致启动多个 Waybar 进程，建议加上 pkill 逻辑（虽然 exec 默认不重启动，但这是个好习惯）：
代码段
exec_always pkill waybar; sleep 2 && waybar
第三步：处理样式差异 (关键)
当你把 Waybar 移出 bar {} 之后，Sway 不再为 Waybar 预留空间。如果此时 Waybar 覆盖了你的窗口，或者窗口顶住了屏幕边缘，你需要检查 Waybar 的配置文件（~/.config/waybar/config）。
确保你的 Waybar 配置中有这一行，它会告诉 Sway 自动避开状态栏：
JSON
"layer": "top",
"position": "top", // 或者 "bottom"
第四步：同步颜色和外观
如果你之前在 bar {} 块里写了很多 colors { ... } 配置，注意：这些配置对 Waybar 是无效的。
Waybar 的外观完全由 ~/.config/waybar/style.css 决定。如果你发现移出后颜色变了，你需要去修改 CSS 文件。例如，设置背景颜色：
CSS
#waybar {
    background: rgba(43, 48, 59, 0.5);
    border-bottom: 3px solid rgba(255, 255, 255, 0.3);
    color: white;
}
第五步：测试生效
    保存 ~/.config/sway/config。
    彻底杀死当前的 Waybar 进程（因为 reload 可能杀不掉旧的）：
    Bash
    pkill waybar
    在 Sway 中按下 $mod+Shift+c 重新加载配置。
    等待 2 秒，观察 Waybar 是否带着亮度信息顺利出现。


针对 Arch Linux 的firefox最佳字体推荐
在 Linux 系统上，为了获得最佳显示效果，建议安装 Google Noto 系列或 Adobe 思源 系列，它们对中文支持最完美。
A. 无衬线字体 (Sans-serif) —— 最推荐的默认设置
    推荐： Noto Sans CJK SC (思源黑体)
    特点： 在高分辨率屏幕下非常清晰，字形标准。
    安装： sudo pacman -S noto-fonts-cjk
B. 衬线字体 (Serif) —— 适合阅读电子书
    推荐： Noto Serif CJK SC (思源宋体)
    特点： 优美、古典，但在低分辨率屏上可能略显单薄，不过在你的 3.1K 屏上表现会非常出色。
C. 等宽字体 (Monospace) —— 极客必备
    推荐： JetBrainsMono Nerd Font
    特点： 专门为编程设计，字形极易辨认，且包含了你在 Sway/Waybar 中用到的所有图标。
    安装： sudo pacman -S ttf-jetbrains-mono-nerd



